<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>豆瓣电影</title>
</head>

<body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
</body>

</html>
<script>
    // 基础路径工具
    function getBasePath() {
        // 检查是否在生产环境且在GitHub Pages上
        if (window.location.hostname.includes('github.io')) {
            // 从URL中提取基础路径
            const pathParts = window.location.pathname.split('/');
            // 找到仓库名部分
            if (pathParts.length > 2) {
                return `/${pathParts[1]}/${pathParts[2]}/`;
            }
        }
        // 本地开发环境
        return '/';
    }

    const BASE_PATH = getBasePath();

    async function testCSV() {
        try {
            const response = await fetch(`${BASE_PATH}data/movie_info.csv`);
            const csvText = await response.text();
            const lines = csvText.split('\n');
            document.getElementById('csv-output').innerHTML = `
          <p>CSV 文件读取成功</p>
          <p>总行数: ${lines.length}</p>
          <p>标题行: ${lines[0]}</p>
          <p>第二行: ${lines[1] || '无数据'}</p>
        `;
        } catch (error) {
            document.getElementById('csv-output').innerHTML = `<p>读取失败: ${error.message}</p>`;
        }
    }
</script>